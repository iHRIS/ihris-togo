"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[4314],{3205:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(8085),i=r(3325),a=(0,i.Z)(s.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},4350:function(e,t,r){r.d(t,{Z:function(){return o}});var s=r(5978),i=r(3325);const a=(0,i.Z)(s.Z);var o=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null==(t=this.$refs.input)||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,r=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(r,t)+"px"},genInput(){const e=s.Z.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){s.Z.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},9137:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.overlay=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-overlay",{attrs:{value:e.overlayUnclosed}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.carryForwardDialog,callback:function(t){e.carryForwardDialog=t},expression:"carryForwardDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Leave Carry Forward")]),r("v-card-text",[e._v(" Are you sure that you want to request carrying "+e._s(e.annualLeave.balanceCarried)+" days from leave cycle "+e._s(e.annualLeave.previousPeriod)+" to leave cycle "+e._s(e.annualLeave.currentPeriod)+" ")]),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.carryForwardDialog=!1}}},[e._v("Cancel")]),r("v-spacer"),r("v-btn",{on:{click:e.createCarryForwardRequest}},[e._v("Yes, Proceed")])],1)],1)],1),r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.carryForwardActionDialog,callback:function(t){e.carryForwardActionDialog=t},expression:"carryForwardActionDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Leave Carry Forward")]),r("v-card-text",[e._v(" Select action for carrying "+e._s(e.annualLeave.balanceCarried)+" days from leave cycle "+e._s(e.annualLeave.previousPeriod)+" to leave cycle "+e._s(e.annualLeave.currentPeriod)+" "),r("v-select",{attrs:{items:e.requestActions,label:"Select Action"},model:{value:e.requestAction,callback:function(t){e.requestAction=t},expression:"requestAction"}})],1),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.carryForwardActionDialog=!1}}},[e._v("Cancel")]),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.requestAction},on:{click:e.createCarryForwardAction}},[e._v("Proceed and Save")])],1)],1)],1),r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.specialStudyExtendDialog,callback:function(t){e.specialStudyExtendDialog=t},expression:"specialStudyExtendDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Special Study Extension")]),r("v-card-text",[e._v(" Current End Date "),r("b",[e._v(e._s(e.$moment(e.leaveRequest.endDate).format("Do MMMM YYYY")))]),e.extensionDate&&(e.$moment(e.leaveRequest.endDate).isAfter(e.extensionDate)||e.leaveRequest.endDate===e.extensionDate)?[r("div",{staticStyle:{color:"red"}},[e._v(" Extended date must be after "+e._s(e.$moment(e.leaveRequest.endDate).format("Do MMMM YYYY"))+" ")])]:e._e(),r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-text-field",e._g({attrs:{label:"Extend To Date*","prepend-icon":"mdi-event",readonly:""},model:{value:e.extensionDateFormatted,callback:function(t){e.extensionDateFormatted=t},expression:"extensionDateFormatted"}},s))]}}]),model:{value:e.extensionDateMenu,callback:function(t){e.extensionDateMenu=t},expression:"extensionDateMenu"}},[r("v-date-picker",{on:{change:function(t){e.extensionDateFormatted=e.$moment(e.extensionDate).format("DD-MM-YYYY")},input:function(t){e.extensionDateMenu=!1}},model:{value:e.extensionDate,callback:function(t){e.extensionDate=t},expression:"extensionDate"}})],1)],1),r("v-col",{attrs:{cols:"6"}},[r("v-textarea",{attrs:{label:"Extension Reasons",outlined:"","hide-details":"auto",dense:""},model:{value:e.extensionReason,callback:function(t){e.extensionReason=t},expression:"extensionReason"}})],1)],1),r("br"),r("b",[r("v-icon",[e._v("mdi-information-outline")]),e._v(" This extension will be activated after the HR supervisor has approved")],1)],2),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.specialStudyExtendDialog=!1}}},[e._v("Cancel")]),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.extensionReason||!e.extensionDate||e.$moment(e.leaveRequest.endDate).isAfter(e.extensionDate)||e.leaveRequest.endDate===e.extensionDate},on:{click:e.createSpecialStudyExtensionReq}},[e._v(" Make Extension Request ")])],1)],1)],1),r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.specialStudyExtensionActionDialog,callback:function(t){e.specialStudyExtensionActionDialog=t},expression:"specialStudyExtensionActionDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Special Study Extension")]),r("v-card-text",[e._v(" Select action for extending special study leave from "+e._s(e.$moment(e.specialStudyExtensionRequest.fromDate).format("Do MMMM YYYY"))+" to "+e._s(e.$moment(e.specialStudyExtensionRequest.toDate).format("Do MMMM YYYY"))+" "),r("v-select",{attrs:{items:e.requestActions,label:"Select Action"},model:{value:e.requestAction,callback:function(t){e.requestAction=t},expression:"requestAction"}})],1),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.specialStudyExtensionActionDialog=!1}}},[e._v("Cancel")]),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.requestAction},on:{click:e.createSpecialStudyExtensionAction}},[e._v("Proceed and Save")])],1)],1)],1),r("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[r("v-list",{staticClass:"white--text"},[r("v-list-item",[r("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(t){return e.$router.push("/resource/view/practitioner/"+e.practitionerId)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-eye")]),r("span",[e._v("View Health Profession")])],1)],1),e.canRequestCarryForward?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.carryForwardDialog=!0}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Request Leave Carry Forward")])],1)],1):e._e(),e.canApproveRequestCarryForward?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.carryForwardActionDialog=!0}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Approve Carry Forward Request")])],1)],1):e._e(),e.canApproveRequestSpecialStudyExt?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.specialStudyExtensionActionDialog=!0}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Approve Extension Request")])],1)],1):e._e(),e.canAddFirstLevelApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.firstLevelApprQuestionnaire)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddSecondLevelApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.secondLevelApprQuestionnaire)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddThirdLevelApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.thirdLevelApprQuestionnaire)}}},[r("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),r("span",[e._v("Add Approval")])],1)],1):e._e()],1)],1),r("v-row",[r("v-col",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.leaveDetailsHeaders,items:e.leaveDetails,"items-per-page":20}}),r("br"),e.carryForwardRequest.fromPeriod?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Leave Carry Forward Request ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("From Leave Cycle")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.fromPeriod)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("To Leave Cycle")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.toPeriod)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Request Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.requestDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.status.display)+" ")])],1)],1)],1):e._e(),e.specialStudyExtensionRequest.id&&"loading"!==e.specialStudyExtensionRequest.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Special Study Extension Request ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("From Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.fromDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("To Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.toDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Request Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.requestDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Reasons")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.description)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.status.display)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Requested By")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.requestor.name)+" ")])],1),r("v-divider"),e.specialStudyExtensionRequest.processor.id?r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.processor.name)+" ")])],1):e._e()],1)],1):e._e(),e.leaveRequest.category?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.leaveRequest.category)+" Request ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Leave Category")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.category)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Start Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.startDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("End Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.endDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Return Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.returnDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Days")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.days)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.status)+" ")])],1)],1),r("v-card-actions",[r("v-spacer"),e.canExtendDays?r("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.specialStudyExtendDialog=!0}}},[e._v(" Extend Days ")]):e._e()],1)],1):e._e(),e.firstLevelApproval.id&&"loading"!==e.firstLevelApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.firstLevelApproval.title)+" ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.description)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.user.name)+" ")])],1)],1)],1):e._e(),e.secondLevelApproval.id&&"loading"!==e.secondLevelApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.secondLevelApproval.title)+" ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.description)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.user.name)+" ")])],1)],1)],1):e._e(),e.thirdLevelApproval.id&&"loading"!==e.thirdLevelApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.thirdLevelApproval.title)+" ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.description)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),r("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.user.name)+" ")])],1)],1)],1):e._e()],1),r("v-col",{attrs:{cols:"3"}},[r("br"),"specialstudy"===e.leaveRequest.categoryid?r("special-study-leave-request-stepper",{attrs:{step:e.step,noHRAppr:!e.thirdLevelApproval.id,noHRSupervisorAppr:!e.secondLevelApproval.id}}):r("leave-request-stepper",{attrs:{step:e.step,noSupervisorAppr:!e.firstLevelApproval.id,noSupervisorSupervisorAppr:!e.secondLevelApproval.id,noHRApproval:!e.thirdLevelApproval.id}})],1)],1)],1)},i=[];const a=r(7673);var o={props:["queries"],data(){return{overlay:!1,overlayUnclosed:!1,loading:!1,carryForwardDialog:!1,carryForwardActionDialog:!1,specialStudyExtendDialog:!1,specialStudyExtensionActionDialog:!1,practitionerId:"",leaveRequest:{startDate:"",category:"",categoryid:""},firstLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},secondLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},thirdLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},carryForwardRequest:{id:"loading",status:{}},specialStudyExtensionRequest:{id:"loading",status:{},requestor:{id:"",name:""},processor:{id:"",name:""}},noSupervisor:!1,noSupervisorSupervisor:!1,noHRSupervisor:!1,supervisor:"",supervisorSupervisor:"",HRSupervisor:"",step:1,leaveDetails:[],annualLeave:{},leaveDetailsHeaders:[{text:"Period",value:"period"},{text:"Category",value:"category"},{text:"Leave Days",value:"maxDays"},{text:"Accrued",value:"accrued"},{text:"Days on Leave",value:"daysOnLeave"},{text:"Expired",value:"expired"},{text:"Balance",value:"balance"}],requestActions:[{text:"Pending",value:"pending"},{text:"Approve",value:"approved"},{text:"Reject",value:"rejected"}],requestAction:"",extensionDate:"",extensionDateFormatted:"",extensionDateMenu:!1,extensionReason:""}},computed:{canExtendDays(){if(this.specialStudyExtensionRequest.id&&"loading"!==this.specialStudyExtensionRequest.id)return!1;if("specialstudy"===this.leaveRequest.categoryid&&"approved"===this.leaveRequest.statuscode){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));if(e&&"Basic/na-hr-manager"===e.valueReference.reference)return!0}return!1},firstLevelApprQuestionnaire(){return"specialstudy"===this.leaveRequest.categoryid?"/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id:"/questionnaire/supervisor-leave-approval/supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},secondLevelApprQuestionnaire(){return"specialstudy"===this.leaveRequest.categoryid?"/questionnaire/hr-supervisor-leave-approval/hr-supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id:"/questionnaire/supervisor-supervisor-leave-approval/supervisor-supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},thirdLevelApprQuestionnaire(){return"/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},canAddFirstLevelApproval(){if(this.firstLevelApproval.id)return!1;if("specialstudy"===this.leaveRequest.categoryid){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));if(e&&"Basic/na-hr-manager"===e.valueReference.reference)return!0}else{let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));if(e&&e.valueReference.reference===this.supervisor)return!0}return!1},canAddSecondLevelApproval(){if(!this.firstLevelApproval.id||"loading"===this.firstLevelApproval.id||"rejected"===this.firstLevelApproval.statuscode||this.secondLevelApproval.id)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));if(!e)return console.error("User not associated with any practitioner"),!1;if("specialstudy"===this.leaveRequest.categoryid){if(e.valueReference.reference===this.HRSupervisor)return!0}else if(e.valueReference.reference===this.supervisorSupervisor)return!0;return!1},canAddThirdLevelApproval(){if(!this.secondLevelApproval.id||"loading"===this.secondLevelApproval.id||"rejected"===this.secondLevelApproval.statuscode||this.thirdLevelApproval.id)return!1;if("specialstudy"===this.leaveRequest.categoryid)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/na-hr-manager"!==e.valueReference.reference||!this.secondLevelApproval.id||this.thirdLevelApproval.id)},canRequestCarryForward(){if(this.carryForwardRequest.id&&"loading"!==this.carryForwardRequest.id||"loading"===this.carryForwardRequest.id)return!1;if(this.leaveDetails.length){let e=this.annualLeave.currentPeriod.split("/")[0],t=this.$moment().diff(e,"months");if(t>6||this.annualLeave.balanceCarried<=0||this.annualLeave.balanceCarried<=this.annualLeave.expired)return!1;if(this.annualLeave.maxDays)return!0}return!1},canApproveRequestCarryForward(){if(!this.carryForwardRequest.id||"loading"===this.carryForwardRequest.id)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/exec-manager"!==e.valueReference.reference||"approved"===this.carryForwardRequest.status.code)},canApproveRequestSpecialStudyExt(){if(!this.specialStudyExtensionRequest.id||"loading"===this.specialStudyExtensionRequest.id)return!1;if("approved"===this.specialStudyExtensionRequest.status.code)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));return e?e.valueReference.reference===this.HRSupervisor:(console.error("User not associated with any practitioner"),!1)}},methods:{getLeaveCaryForward(){let e={practitioner:"Practitioner/"+this.practitionerId,_profile:"http://ihris.org/fhir/StructureDefinition/leave-carry-forward-request-profile",toleaveperiod:this.annualLeave.currentPeriod};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((async e=>{e&&e.entry&&e.entry.length?this.populateCarryForward(e.entry[0].resource):this.carryForwardRequest.id=""}))))},populateCarryForward(e){this.carryForwardRequest.id=e.id,this.carryForwardRequest.fromPeriod=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/from-leave-period"===e.url)).valueString,this.carryForwardRequest.toPeriod=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/to-leave-period"===e.url)).valueString,this.carryForwardRequest.requestDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/request-date"===e.url)).valueDate,this.carryForwardRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/carry-approval-status"===e.url)).valueCoding},getSpecialStudyExtensionRequest(){let e={practitioner:"Practitioner/"+this.practitionerId,_profile:"http://ihris.org/fhir/StructureDefinition/special-study-extension-request-profile",leaverequest:"Basic/"+this.queries.id};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((async e=>{if(e&&e.entry&&e.entry.length){let t=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/requested-by"===e.url));t&&this.getHRSupervisor(t.valueReference.reference),this.populateSpecialStudyExtensionReq(e.entry[0].resource)}else this.specialStudyExtensionRequest.id=""}))))},populateSpecialStudyExtensionReq(e){this.specialStudyExtensionRequest.id=e.id,this.specialStudyExtensionRequest.fromDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/from-date"===e.url)).valueDate,this.specialStudyExtensionRequest.toDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/to-date"===e.url)).valueDate,this.specialStudyExtensionRequest.requestDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/request-date"===e.url)).valueDate,this.specialStudyExtensionRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/special-study-extension-approval-status"===e.url)).valueCoding,this.specialStudyExtensionRequest.description=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url)).valueString;let t=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/requested-by"===e.url));t&&(this.specialStudyExtensionRequest.requestor.id=t.valueReference.reference,fetch("/site/leave/leaveProcessor/"+t.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.specialStudyExtensionRequest.requestor.name=e.name})))));let r=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/processed-by"===e.url));r&&(this.specialStudyExtensionRequest.processor.id=r.valueReference.reference,fetch("/site/leave/leaveProcessor/"+r.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.specialStudyExtensionRequest.processor.name=e.name})))))},getLeaveDetails(){fetch("/site/leave/balance/"+this.practitionerId).then((e=>e.json().then((e=>{this.leaveDetails=e,"annual"===this.leaveRequest.categoryid?(this.annualLeave=this.leaveDetails.find((e=>"annual"===e.categoryid)),this.getLeaveCaryForward()):"specialstudy"===this.leaveRequest.categoryid&&this.getSpecialStudyExtensionRequest()}))))},getSupervisor(){let e,t={practitioner:this.practitionerId,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(t)).then((t=>t.json().then((async t=>{if(t&&t.entry&&t.entry.length)for(let s of t.entry)e?e.resource.id<s.resource.id&&(e=s):e=s;let r=e.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor"===e.url));r?(this.supervisor=r.valueReference.reference,this.getSupervisorSupervisor(this.supervisor)):this.noSupervisor=!0}))))},getSupervisorSupervisor(e){let t,r={practitioner:e,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(r)).then((e=>e.json().then((async e=>{if(e&&e.entry&&e.entry.length)for(let s of e.entry)t?t.resource.id<s.resource.id&&(t=s):t=s;let r=t.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/supervisor"===e.url));r?this.supervisorSupervisor=r.valueReference.reference:this.noSupervisorSupervisor=!0}))))},getHRSupervisor(e){fetch("/site/leave/getUserSupervisor/"+e.split("/")[1]).then((e=>e.json().then((e=>{e.supervisor?this.HRSupervisor=e.supervisor:this.noHRSupervisor=!0}))))},getLeave(){fetch("/fhir/Basic/"+this.queries.id).then((e=>e.json().then((async e=>{this.practitionerId=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url)).valueReference.reference,this.practitionerId=this.practitionerId.split("/")[1],this.leaveRequest.id=this.queries.id,this.leaveRequest.startDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/start-date"===e.url)).valueDate,this.leaveRequest.endDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/end-date"===e.url)).valueDate,this.leaveRequest.returnDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/return-date"===e.url)).valueDate,this.leaveRequest.days=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-days"===e.url))?.valueInteger,this.leaveRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-status"===e.url)).valueCoding.display,this.leaveRequest.statuscode=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-status"===e.url)).valueCoding.code,"Approved"===this.leaveRequest.status&&(this.step=4);let t=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-category"===e.url)).valueReference.reference;this.leaveRequest.categoryid=t.split("/")[1],await fetch("/fhir/"+t).then((e=>e.json().then((async e=>{this.leaveRequest.category=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-basic-name"===e.url)).valueString})))),this.getLeaveDetails(),this.getSupervisor(),this.getFirstLevelApproval()}))))},getFirstLevelApproval(){let e,t={leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};"specialstudy"===this.leaveRequest.categoryid?(this.firstLevelApproval.title="HR Approval",t._profile="http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",e="http://ihris.org/fhir/StructureDefinition/hr-leave-status"):(this.firstLevelApproval.title="Immediate Supervisor Approval",t._profile="http://ihris.org/fhir/StructureDefinition/supervisor-leave-approval-profile",e="http://ihris.org/fhir/StructureDefinition/supervisor-leave-status"),fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((t=>{if(t.entry&&t.entry.length){4!=this.step&&(this.step=2),this.firstLevelApproval.id=t.entry[0].resource.id,this.firstLevelApproval.status=t.entry[0].resource.extension.find((t=>t.url===e)).valueCoding.display,this.firstLevelApproval.statuscode=t.entry[0].resource.extension.find((t=>t.url===e)).valueCoding.code,this.firstLevelApproval.date=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let r=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));r&&(this.firstLevelApproval.description=r.valueString);let s=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));s&&(this.firstLevelApproval.user.id=s.valueReference.reference,fetch("/site/leave/leaveProcessor/"+s.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.firstLevelApproval.user.name=e.name})))),"specialstudy"===this.leaveRequest.categoryid&&this.getHRSupervisor(s.valueReference.reference)),this.getSecondLevelApproval()}else this.firstLevelApproval.id="",this.secondLevelApproval.id="",this.thirdLevelApproval.id=""}))))},getSecondLevelApproval(){let e,t={leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};"specialstudy"===this.leaveRequest.categoryid?(this.secondLevelApproval.title="HR Supervisor Approval",t._profile="http://ihris.org/fhir/StructureDefinition/hr-supervisor-leave-approval-profile",e="http://ihris.org/fhir/StructureDefinition/hr-supervisor-leave-status"):(this.secondLevelApproval.title="Supervisor's Supervisor Approval",t._profile="http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-approval-profile",e="http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-status"),fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((t=>{if(t.entry&&t.entry.length){4!=this.step&&(this.step=3),this.secondLevelApproval.id=t.entry[0].resource.id,this.secondLevelApproval.status=t.entry[0].resource.extension.find((t=>t.url===e)).valueCoding.display,this.secondLevelApproval.statuscode=t.entry[0].resource.extension.find((t=>t.url===e)).valueCoding.code,this.secondLevelApproval.date=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let r=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));r&&(this.secondLevelApproval.description=r.valueString);let s=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));s&&(this.secondLevelApproval.user.id=s.valueReference.reference,fetch("/site/leave/leaveProcessor/"+s.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.secondLevelApproval.user.name=e.name}))))),this.getThirdLevelApproval()}else this.secondLevelApproval.id="",this.thirdLevelApproval.id=""}))))},getThirdLevelApproval(){if("specialstudy"===this.leaveRequest.categoryid)return void(this.thirdLevelApproval.id="");this.thirdLevelApproval.title="HR Approval";let e={_profile:"http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(e)).then((e=>e.json().then((e=>{if(e.entry&&e.entry.length){this.thirdLevelApproval.id=e.entry[0].resource.id,this.thirdLevelApproval.status=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===e.url)).valueCoding.display,this.thirdLevelApproval.statuscode=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===e.url)).valueCoding.code,this.thirdLevelApproval.date=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let t=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));t&&(this.thirdLevelApproval.description=t.valueString);let r=e.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));r&&(this.firstLevelApproval.user.id=r.valueReference.reference,fetch("/site/leave/leaveProcessor/"+r.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.firstLevelApproval.user.name=e.name})))))}else this.thirdLevelApproval.id=""}))))},createCarryForwardRequest(){this.overlayUnclosed=!0,fetch("/site/leave/createCarryRequest/"+this.practitionerId,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual",body:JSON.stringify(this.annualLeave)}).then((e=>{this.overlayUnclosed=!1,this.carryForwardDialog=!1,201===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Request Created Successfully"}),e.json().then((e=>{this.getLeave(),this.populateCarryForward(e)}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})})).catch((()=>{this.overlayUnclosed=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})}))},createCarryForwardAction(){this.overlayUnclosed=!0,fetch("/site/leave/createCarryAction/"+this.carryForwardRequest.id+"/"+this.requestAction,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual"}).then((e=>{this.requestAction="",this.overlayUnclosed=!1,this.carryForwardActionDialog=!1,200===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Action Added Successfully"}),e.json().then((e=>{this.populateCarryForward(e),this.getLeaveDetails()}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})})).catch((()=>{this.overlayUnclosed=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})}))},createSpecialStudyExtensionReq(){this.overlayUnclosed=!0;let e=JSON.parse(JSON.stringify(this.leaveRequest));e.extensionDate=this.extensionDate,e.extensionReason=this.extensionReason,fetch("/site/leave/createSpecialStudyExtensionRequest/"+this.practitionerId,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual",body:JSON.stringify(e)}).then((e=>{this.overlayUnclosed=!1,this.specialStudyExtendDialog=!1,201===e.status?(this.$store.commit("setMessage",{type:"success",text:"Extension Request Created Successfully"}),e.json().then((e=>{this.getLeave(),this.populateSpecialStudyExtensionReq(e)}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Create Extension Request."})})).catch((()=>{this.overlayUnclosed=!1,this.specialStudyExtendDialog=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})}))},createSpecialStudyExtensionAction(){this.overlayUnclosed=!0,fetch("/site/leave/createSpecialStudyExtensionAction/"+this.specialStudyExtensionRequest.id+"/"+this.requestAction,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual"}).then((e=>{this.requestAction="",this.overlayUnclosed=!1,this.specialStudyExtensionActionDialog=!1,200===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Action Added Successfully"}),e.json().then((()=>{this.getLeaveDetails()}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})})).catch((()=>{this.overlayUnclosed=!1,this.specialStudyExtensionActionDialog=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})}))}},created(){this.getLeave()},components:{"leave-request-stepper":()=>r.e(3188).then(r.bind(r,3188)),"special-study-leave-request-stepper":()=>r.e(3770).then(r.bind(r,3770))}},n=o,l=r(3736),c=r(3453),u=r.n(c),v=r(3150),d=r(2371),p=r(7118),h=r(2102),f=r(4228),y=r(865),g=r(9771),x=r(4497),w=r(1418),S=r(6428),m=r(6816),q=r(7620),R=r(1152),D=r(5132),A=r(1058),_=r(624),C=r(2877),b=r(3986),L=r(9762),F=r(5978),E=r(4350),j=r(6656),k=(0,l.Z)(n,s,i,!1,null,null,null),$=k.exports;u()(k,{VBtn:v.Z,VCard:d.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VCol:h.Z,VContainer:f.Z,VDataTable:y.Z,VDatePicker:g.Z,VDialog:x.Z,VDivider:w.Z,VIcon:S.Z,VList:m.Z,VListItem:q.Z,VMenu:R.Z,VNavigationDrawer:D.Z,VOverlay:A.Z,VProgressCircular:_.Z,VRow:C.Z,VSelect:b.Z,VSpacer:L.Z,VTextField:F.Z,VTextarea:E.Z,VToolbar:j.Z})}}]);
//# sourceMappingURL=4314.3c3facb9.js.map