"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[9564],{1835:function(e,t,s){s.d(t,{Z:function(){return l}});s(6699);var i=s(3986),a=s(5978),n=s(6290),r=s(4589);const o={...i.l,offsetY:!0,offsetOverflow:!0,transition:!1};var l=i.Z.extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,s)=>s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:i.Z.options.props.menuProps.type,default:()=>o},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map((e=>this.getValue(e)))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some((e=>!this.hasItem(e))):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((e=>{const t=(0,r.qF)(e,this.itemText),s=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),s)}))},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch!==e&&(this.lazySearch=e,this.$emit("update:search-input",e))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=i.Z.options.computed.$_menuProps.call(this);return e.contentClass=`v-autocomplete__content ${e.contentClass||""}`.trim(),{...o,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find((e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue))))},listData(){const e=i.Z.options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){if(e!==t){if(!this.autoSelectFirst){const s=t[this.$refs.menu.listIndex];s?this.setMenuIndex(e.findIndex((e=>e===s))):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick((()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&e.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))}))}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===r.Do.left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===r.Do.right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==r.Do.backspace&&e!==r.Do["delete"]||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const i=this.selectedItems.length,a=e!==i-1?e:e-1,n=this.selectedItems[a];n?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=a},clearableCallback(){this.internalSearch=null,i.Z.options.methods.clearableCallback.call(this)},genInput(){const e=a.Z.options.methods.genInput.call(this);return e.data=(0,n.ZP)(e.data,{attrs:{"aria-activedescendant":(0,r.vO)(this.$refs.menu,"activeTile.id"),autocomplete:(0,r.vO)(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=i.Z.options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?i.Z.options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,s=t.value;t.value&&this.activateMenu(),this.multiple||""!==s||this.deleteCurrentItem(),this.internalSearch=s,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[r.Do.home,r.Do.end].includes(t)||i.Z.options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){i.Z.options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){i.Z.options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){i.Z.options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick((()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))}))},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,s;if(-1===this.selectedIndex)return;const i=this.selectedItems[this.selectedIndex],a=this.getText(i);null==(t=e.clipboardData)||t.setData("text/plain",a),null==(s=e.clipboardData)||s.setData("text/vnd.vuetify.autocomplete.item+plain",a),e.preventDefault()}}})},3205:function(e,t,s){s.d(t,{Z:function(){return n}});var i=s(8085),a=s(3325),n=(0,a.Z)(i.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},667:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"mt-4"},[s("v-card",{attrs:{elevation:"1"}},[s("v-card-title",{staticClass:"primary darken-1 white--text font-weight-bold justify-center"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"white"}},[e._v("mdi-database-export-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Audit Logs"))+" ")],1),s("v-card-title",{staticClass:"pa-8"},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-row",[s("v-col",[s("v-autocomplete",{attrs:{items:e.auditEventSubType,label:e.$t("App.hardcoded-texts.Action Type"),clearable:"",dense:"","item-text":"display","item-value":"code",multiple:"",outlined:""},model:{value:e.actionSubType,callback:function(t){e.actionSubType=t},expression:"actionSubType"}})],1),s("v-col",[s("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.User Email"),dense:"",outlined:""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px","offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[s("v-text-field",e._g(e._b({attrs:{label:e.$t("App.hardcoded-texts.Start From"),dense:"",outlined:"","persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}},"v-text-field",a,!1),i))]}}]),model:{value:e.startDateMenu,callback:function(t){e.startDateMenu=t},expression:"startDateMenu"}},[s("v-date-picker",{attrs:{max:e.maxDate,"no-title":""},on:{input:function(t){e.startDateMenu=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"290px","min-width":"290px","offset-y":"",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[s("v-text-field",e._g(e._b({attrs:{label:e.$t("App.hardcoded-texts.To"),dense:"",outlined:"","persistent-hint":"","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}},"v-text-field",a,!1),i))]}}]),model:{value:e.endDateMenu,callback:function(t){e.endDateMenu=t},expression:"endDateMenu"}},[s("v-date-picker",{attrs:{max:e.maxDate,"no-title":""},on:{input:function(t){e.endDateMenu=!1}},model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}})],1)],1),s("v-col",[s("v-autocomplete",{attrs:{items:e.auditEventOutcome,label:e.$t("App.hardcoded-texts.Operation Outcome"),clearable:"",dense:"","item-text":"display","item-value":"code",multiple:"",outlined:""},model:{value:e.operationOutcome,callback:function(t){e.operationOutcome=t},expression:"operationOutcome"}})],1)],1)],1)],1),s("v-divider",{staticClass:"my-2"}),e.error_message?s("v-card-subtitle",{staticClass:"white--text error"},[e._v(e._s(e.error_message)+" ")]):e._e(),s("v-card-text",[s("v-card-text",[s("v-data-table",{staticClass:"elevation-1 mt-3",staticStyle:{cursor:"pointer"},attrs:{"footer-props":{"items-per-page-options":e.itemsPerPage},headers:e.auditLogHeader,items:e.auditData,loading:e.loading,options:e.options,"server-items-length":e.total,"item-key":"id"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.actions",fn:function(t){var i=t.item;return[i.resource?s("v-btn",{staticClass:"ma-1",attrs:{color:"primary",outlined:"","x-small":""},on:{click:function(t){return e.openPage(i)}}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.View Record"))+" ")]):e._e(),i.userId?s("v-btn",{staticClass:"ma-1",attrs:{color:"primary",outlined:"","x-small":""},on:{click:function(t){return e.openUser(i)}}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.View User"))+" ")]):e._e(),i.resource&&i.resource.includes("_history")?s("v-btn",{staticClass:"ma-1",attrs:{color:"primary",outlined:"","x-small":""},on:{click:function(t){return e.viewDifference(i)}}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.View Changes"))+" ")]):e._e()]}}])})],1)],1),s("v-dialog",{attrs:{width:"60%"},model:{value:e.compareDialog,callback:function(t){e.compareDialog=t},expression:"compareDialog"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5 grey lighten-2 justify-center"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Changed Fields"))+" ")]),s("v-card-text",[void 0,s("v-row",{staticClass:"ma-4",attrs:{"no-gutters":""}},[s("v-col",[s("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[s("v-card-title",{staticClass:"justify-center"},[e._v(e._s(e.$t("App.hardcoded-texts.Changes")))]),s("v-card-text",[s("v-simple-table",[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("App.hardcoded-texts.Field")))]),s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("App.hardcoded-texts.Old Value")))]),s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("App.hardcoded-texts.New Value")))])])]),s("tbody",e._l(e.differnce,(function(t,i){return s("tr",{key:i},[s("td",[e._v(e._s(t.path))]),s("td",[e._v(e._s(e.formatValue(t.old)))]),s("td",[e._v(e._s(e.formatValue(t.new)))])])})),0)])],1)],1)],1)],1)],2),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.compareDialog=!1}}},[e._v(" Close ")])],1)],1)],1)],1)],1)},a=[],n={name:"Audit Logs",created(){this.setUp(),this.getData(!0),this.fetchAuditEventSubType()},data:function(){return{auditData:[],id:null,userEmail:null,operationOutcome:null,total:0,prevPage:-1,link:[],startDate:null,dateTo:null,startDateMenu:!1,auditEventSubType:[],endDateMenu:!1,error_message:null,options:{itemsPerPage:10},loading:!1,resource:"AuditEvent",actionSubType:null,profile:"http://ihris.org/fhir/StructureDefinition/ihris-auditevent",compareDialog:!1,resourcePage:{},differnce:void 0}},methods:{setUp(){let e="/fhir/Basic?_count=200&_format=json&_pretty=true&_profile=http://ihris.org/fhir/StructureDefinition/ihris-page";fetch(e).then((e=>{e.json().then((e=>{e.entry.map((e=>{let t=e.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-page-display"===e.url)).extension.find((e=>"resource"===e.url)).valueReference.reference,s=e.resource.id.split("ihris-page-").pop();this.resourcePage[t]=s}))}))}))},getData(e){this.loading=!0;let t="";if(e&&(this.options.page=1),this.options.page>1&&(this.options.page===this.prevPage-1?t=this.link.find((e=>"previous"===e.relation)).url:this.options.page===this.prevPage+1&&(t=this.link.find((e=>"next"===e.relation)).url),t=t.replace("/fhir?","/fhir/"+this.resource+"?"),t=t.substring(t.indexOf("/fhir/")),-1===t.indexOf("_total=accurate")&&(t+="&_total=accurate"),this.profile&&(t=t+"&_profile="+this.profile)),""===t){let e=this.options.itemsPerPage||10,s="";for(let t in this.options.sortBy)s&&(s+=","),this.options.sortDesc[t]&&(s+="-"),s+=this.options.sortBy[t];t="/fhir/"+this.resource+"?_count="+e+"&_elements=id,agent,subtype,entity,outcome,recorded&_total=accurate&_profile="+this.profile+"&_sort=-_lastUpdated"}this.id&&(t+=`&_id=${this.id}`),this.startDate&&(t+=`&date=ge${this.startDate}`),this.dateTo&&(t+=`&date=le${this.dateTo}`),this.actionSubType&&(t+=`&subtype=${this.actionSubType}`),this.userEmail&&(t+=`&altid:contains=${this.userEmail}`),this.operationOutcome&&(t+=`&outcome=${this.operationOutcome}`),this.prevPage=this.options.page,fetch(t).then((e=>{e.json().then((e=>{this.link=e.link,this.total=e.total,this.auditData=[],e.total>0&&e.entry.map((e=>{let t=e.resource.entity?.[0]?.what?.reference,s={id:e.resource.id,userId:e.resource.agent[0]?.id,userEmail:e.resource.agent[0]?.altId,action:e.resource.subtype[0]?.display,fullName:e.resource.agent[0]?.name,outcome:this.auditEventOutcome.find((t=>t.code===e.resource.outcome))?.display,recorded:e.resource.recorded,resource:t};if(t&&t.startsWith("QuestionnaireResponse")){let e="/fhir/QuestionnaireResponse/"+t.split("/")?.[1];fetch(e).then((e=>{e.json().then((e=>{let t=e.meta.tag.find((e=>"http://ihris.org/fhir/tags/resource"===e.system));e.subject&&e.subject.reference?s.resource=e.subject?.reference:t&&t.code&&(s.resource=t.code)}))})).catch((e=>{this.error_message=e.message}))}if(s.userEmail){let e=`/fhir/Person?email=${s.userEmail}`;fetch(e).then((e=>{e.json().then((e=>{s.userId=e.entry[0].resource.id}))})).catch((e=>{this.error_message=e.message}))}this.auditData.push(s)})),this.loading=!1})).catch((e=>{this.loading=!1,this.error_message=e.message}))}))},fetchAuditEventSubType(){fetch("/fhir/ValueSet/audit-event-sub-type/$expand").then((e=>{e.json().then((e=>{e.expansion.contains&&(this.auditEventSubType=e.expansion.contains)}))}))},openUser(e){if(e?.userId){const t=this.$router.resolve({name:"resource_view",params:{page:"user",id:e.userId}});window.open(t.href,"_blank")}},openPage(e){if(e?.resource){let t=e.resource.split("/"),s=`/fhir/${t[0]}/${t[1]}`;fetch(s).then((e=>{e.json().then((e=>{let s=e.meta.profile[0].split("http://ihris.org/fhir/").pop();const i=this.$router.resolve({name:"resource_view",params:{page:this.resourcePage[s],id:t[1]}});window.open(i.href,"_blank")}))}))}},viewDifference(e){let t=e.resource,s=t.split("/_history/")[0],i=parseInt(t.split("/_history/")[1]);if(1===i)return void this.$toast.error("No previous version to compare with");let a=`/fhir/vRead/${s}/${i}`,n=`/fhir/vRead/${s}/${i-1}`,r={},o={};this.compareDialog=!0,fetch(a).then((e=>{e.json().then((e=>{o=e,fetch(n).then((e=>{e.json().then((e=>{r=e,r&&o&&(this.differnce=this.compareJSON(r,o))}))}))}))}))},compareJSON(e,t){const s="string"===typeof e?JSON.parse(e):e,i="string"===typeof t?JSON.parse(t):t;function a(e,t,s=""){const i=[];for(const n in e){const r=s?`${s}.${n}`:n;n in t?typeof e[n]!==typeof t[n]?i.push({path:r,old:e[n],new:t[n]}):"object"===typeof e[n]&&null!==e[n]?i.push(...a(e[n],t[n],r)):e[n]!==t[n]&&i.push({path:r,old:e[n],new:t[n]}):i.push({path:r,old:e[n],new:null})}for(const a in t){const n=s?`${s}.${a}`:a;a in e||i.push({path:n,old:null,new:t[a]})}return i}return a(s,i)},formatValue(e){return null===e?"_":Array.isArray(e)?JSON.stringify(e,null,2):e}},computed:{maxDate(){return this.$moment().format("YYYY-MM-DD")},itemsPerPage(){return[5,10,50,100]},auditLogHeader(){let e=[{text:this.$t("App.hardcoded-texts.User Email"),align:"start",sortable:!0,value:"userEmail"},{text:this.$t("App.hardcoded-texts.Full Name"),align:"start",sortable:!0,value:"fullName"},{text:this.$t("App.hardcoded-texts.Resource"),align:"start",sortable:!0,value:"resource"},{text:this.$t("App.hardcoded-texts.Action"),align:"start",sortable:!0,value:"action"},{text:this.$t("App.hardcoded-texts.Recorded On"),align:"start",sortable:!0,value:"recorded"},{text:this.$t("App.hardcoded-texts.Operation Outcome"),align:"start",sortable:!0,value:"outcome"},{text:this.$t("App.hardcoded-texts.Action"),value:"actions",sortable:!1}];return e},auditEventOutcome(){let e=[{code:"0",display:this.$t("App.hardcoded-texts.Success"),definition:"The operation completed successfully (whether with warnings or not)."},{code:"4",display:this.$t("App.hardcoded-texts.Minor failure"),definition:"The action was not successful due to some kind of minor failure (often equivalent to an HTTP 400 response)."},{code:"8",display:this.$t("App.hardcoded-texts.Serious failure"),definition:"The action was not successful due to some kind of unexpected error (often equivalent to an HTTP 500 response)."},{code:"12",display:this.$t("App.hardcoded-texts.Major failure"),definition:"An error of such magnitude occurred that the system is no longer available for use (i.e. the system died)."}];return e}},watch:{options:{handler(){this.getData()},deep:!0},id(){this.getData()},startDate(){this.getData()},dateTo(){this.getData()},actionSubType(){this.getData()},userEmail(){this.getData()},operationOutcome(){this.getData()}}},r=n,o=s(3736),l=s(3453),c=s.n(l),d=s(1835),h=s(3150),u=s(2371),p=s(7118),m=s(2102),f=s(4228),v=s(865),g=s(9771),x=s(4497),y=s(1418),b=s(6428),w=s(4470),I=s(1152),S=s(2877),_=s(3568),D=s(9762),$=s(5978),k=(0,o.Z)(r,i,a,!1,null,null,null),C=k.exports;c()(k,{VAutocomplete:d.Z,VBtn:h.Z,VCard:u.Z,VCardActions:p.h7,VCardSubtitle:p.Qq,VCardText:p.ZB,VCardTitle:p.EB,VCol:m.Z,VContainer:f.Z,VDataTable:v.Z,VDatePicker:g.Z,VDialog:x.Z,VDivider:y.Z,VIcon:b.Z,VLayout:w.Z,VMenu:I.Z,VRow:S.Z,VSimpleTable:_.Z,VSpacer:D.Z,VTextField:$.Z})},9553:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-row",{staticStyle:{height:"80vh"},attrs:{align:"center",justify:"center"}},[s("v-col",[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"py-8 px-4",attrs:{"min-width":"500px"}},[s("v-card-title",{staticClass:"justify-center"},[s("v-img",{attrs:{src:"/images/iHRIS5LogoBig.png",align:"center",contain:"",justify:"center","max-height":"132","max-width":"150"}})],1),s("v-card-text",{attrs:{align:"center",justify:"center"}},[s("h2",{staticClass:"text--primary font-weight-medium pt-3 pb-6"},[e._v(" Reset your password!"),s("br")]),s("v-form",{ref:"resetPasswordForm",staticClass:"elevation-0",attrs:{"lazy-validation":""}},[s("v-text-field",{attrs:{label:"New Password",outlined:"",dense:"","append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",type:e.show_pass?"text":"password","prepend-icon":"mdi-form-textbox-password"},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),s("v-text-field",{attrs:{label:"Confirm Password",outlined:"",dense:"","append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",type:e.show_pass?"text":"password","prepend-icon":"mdi-form-textbox-password"},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1),s("v-card-actions",[s("v-snackbar",{staticClass:"align-content-lg-space-between",attrs:{absolute:e.absolute,color:"secondary"},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[s("v-btn",e._b({attrs:{color:"warning",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",i,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")]),s("v-spacer"),s("v-btn",{staticClass:"mx-2",attrs:{color:"primary",loading:e.loggingin,disabled:e.loggingin},on:{click:e.submit}},[e._v("Save")])],1)],1)],1)],1)],1)},a=[],n={name:"reset-password",data:function(){return{show_pass:!1,loggingin:!1,message:"",snackbar:!1,newPassword:"",confirmPassword:"",absolute:!0}},methods:{submit:function(){let e=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,32}$/;if(""===this.newPassword||""===this.confirmPassword)this.message="All Fields are required!",this.snackbar=!0,this.signingin=!1;else if(this.newPassword!==this.confirmPassword)this.message="Passwords do not match!",this.snackbar=!0,this.signingin=!1;else if(this.newPassword.match(e)){this.loggingin=!0;let e=new URLSearchParams;e.append("newPassword",this.newPassword),e.append("confirmPassword",this.confirmPassword);const t=this.$route.query.token,s=this.$route.query.userId;fetch("auth/reset-password?token="+t+"&userId="+s,{method:"POST",body:e}).then((e=>e.json())).then((e=>{this.loggingin=!1,e.ok?(this.message=e.message,this.snackbar=!0,setTimeout((()=>{this.$router.push("/")}),800)):(this.message=e.message,this.snackbar=!0)})).catch((e=>{this.loggingin=!1,this.message=e,this.snackbar=!0}))}else this.message="Password must be at least 8 characters long, contain at least one number, one uppercase letter, one lowercase letter, and one special character!",this.snackbar=!0,this.signingin=!1}}},r=n,o=s(3736),l=s(3453),c=s.n(l),d=s(3150),h=s(2371),u=s(7118),p=s(2102),m=s(6232),f=s(7047),v=s(2877),g=s(3202),x=s(9762),y=s(5978),b=(0,o.Z)(r,i,a,!1,null,null,null),w=b.exports;c()(b,{VBtn:d.Z,VCard:h.Z,VCardActions:u.h7,VCardText:u.ZB,VCardTitle:u.EB,VCol:p.Z,VForm:m.Z,VImg:f.Z,VRow:v.Z,VSnackbar:g.Z,VSpacer:x.Z,VTextField:y.Z})}}]);
//# sourceMappingURL=reset-password.f1eebd3f.js.map